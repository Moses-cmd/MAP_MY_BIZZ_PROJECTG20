<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Account Activation</title>
  <link rel="stylesheet" href="../CSS/style.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo-container">
      <img src="../Assets/nv.png" alt="Map My Biz Logo" />
    </div>
  </nav>

  <!-- Activation Message -->
  <div class="container form-container">
    <h2>Account Activation</h2>
    <p id="activation-message">We have sent an activation link to your registered email address. Please check your inbox to activate your account.</p>
    
    <button id="resend-btn">Resend Activation Email</button>
  </div>

  <script type="module">
    import supabase from "../supabaseClient.js";
  
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const { data, error } = await supabase.auth.getUser();
  
        if (error) throw error;
  
        const user = data?.user;
        let identifier = "your account";
  
        if (user?.email) {
          identifier = user.email;
        } else if (user?.phone) {
          identifier = user.phone;
        }
  
        document.getElementById("activation-message").textContent =
          `We have sent an activation link to ${identifier}. Please check your inbox to activate your account.`;
  
        // Resend button handler (you can wire this to Supabase resend if needed)
        document.getElementById("resend-btn").addEventListener("click", () => {
          alert(`A new activation link has been sent to ${identifier}.`);
        });
  
      } catch (err) {
        console.error("Activation page error:", err.message);
      }
    });
  </script>  
<script type="module" src="../JS/script.js"></script>
</body>
</html>
